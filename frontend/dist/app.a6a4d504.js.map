{"version":3,"sources":["src/templates.js","src/utils.js","src/JobSearch.js","src/app.js"],"names":["jobTemplate","job","currency","title","salary_max","location","display_name","description","redirect_url","extractFormData","form","Array","from","elements","reduce","acc","id","value","getCurrencySymbol","country","currencies","gb","us","au","ca","JobSearch","searchFormSelector","resultsContainerSelector","loadingElementSelector","searchForm","document","querySelector","resultsContainer","loadingElement","countryCode","setCurrencySymbol","currencySymbol","addEventListener","event","preventDefault","startLoading","innerHTML","search","fetch","then","response","json","results","stopLoading","map","join","jobs","catch","classList","add","remove","jobSearch","setCountryCode","configureFormListener"],"mappings":"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","file":"app.a6a4d504.js","sourceRoot":"..","sourcesContent":["export const jobTemplate = (job, currency) => `\n<div class=\"card\">\n  <div class=\"card-body\">\n  <h4 class=\"card-title\">${job.title} up to ${currency}${job.salary_max}</h4>\n  <h5>${job.location.display_name}</h5>\n  <p class=\"card-text\">${job.description}</p>\n  <a href=\"${job.redirect_url}\">View Job</a>\n  </div>\n</div>\n`;","export const extractFormData = form => Array\n    .from(form.elements)\n    .reduce((acc, { id, value }) => ({ [id]: value, ...acc }), {});\n\nexport const getCurrencySymbol = country => {\n    const currencies = {\n        gb: 'Â£',\n        us: '$',\n        au: '$',\n        ca: '$',\n    };\n    return currencies[country];\n}","import { jobTemplate } from './templates';\nimport { extractFormData, getCurrencySymbol } from './utils';\n\n\nexport class JobSearch {\n\n  constructor(searchFormSelector, resultsContainerSelector, loadingElementSelector) {\n    this.searchForm = document.querySelector(searchFormSelector);\n    this.resultsContainer = document.querySelector(resultsContainerSelector);\n    this.loadingElement = document.querySelector(loadingElementSelector);\n  }\n\n  setCountryCode() {\n    this.countryCode = 'gb';\n    this.setCurrencySymbol();\n\n    // fetch('http://ip-api.com/json')\n    //   .then(results => results.json())\n    //   .then(results => {\n    //     this.countryCode = results.countryCode.toLowerCase();\n    //     this.setCurrencySymbol();\n    //   });\n  }\n\n  setCurrencySymbol() {\n    this.currencySymbol = getCurrencySymbol(this.countryCode);\n  }\n\n  configureFormListener() {\n    this.searchForm.addEventListener('submit', (event) => {\n    event.preventDefault();\n    this.startLoading();\n    this.resultsContainer.innerHTML = '';\n    const { search, location } = extractFormData(this.searchForm);\n    fetch(`http://localhost:3000/?search=${search}&location=${location}&country=${this.countryCode}`)\n      .then(response => response.json())\n      .then(({ results }) => {\n        this.stopLoading();\n        return results\n          .map(job => jobTemplate(job, this.currencySymbol))\n          .join('');\n      })\n      .then(jobs => this.resultsContainer.innerHTML = jobs)\n      .catch(() => this.stopLoading());\n    });\n  }\n\n  startLoading() {\n    this.loadingElement.classList.add('loading');\n  }\n\n  stopLoading() {\n    this.loadingElement.classList.remove('loading');\n  }\n}\n\n","import { JobSearch } from './JobSearch';\n\nconst jobSearch = new JobSearch('#search-form', '.result-container', '.loading-element');\njobSearch.setCountryCode();\njobSearch.configureFormListener();\n"]}